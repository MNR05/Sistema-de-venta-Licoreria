USE [appLicoreria]
GO
/****** Object:  Database [applicoreria]    Script Date: 16/11/2022 23:12:37 ******/
CREATE DATABASE [applicoreria]
 CONTAINMENT = NONE
 ON  PRIMARY 
( NAME = N'applicoreria', FILENAME = N'D:\DocumentosSql\MSSQL15.MSSQLSERVER\MSSQL\DATA\applicoreria.mdf' , SIZE = 8192KB , MAXSIZE = UNLIMITED, FILEGROWTH = 65536KB )
 LOG ON 
( NAME = N'applicoreria_log', FILENAME = N'D:\DocumentosSql\MSSQL15.MSSQLSERVER\MSSQL\DATA\applicoreria_log.ldf' , SIZE = 8192KB , MAXSIZE = 2048GB , FILEGROWTH = 65536KB )
 WITH CATALOG_COLLATION = DATABASE_DEFAULT
GO
ALTER DATABASE [applicoreria] SET COMPATIBILITY_LEVEL = 150
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))


/*=======================================================================*/

begin
EXEC [applicoreria].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [applicoreria] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [applicoreria] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [applicoreria] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [applicoreria] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [applicoreria] SET ARITHABORT OFF 
GO
ALTER DATABASE [applicoreria] SET AUTO_CLOSE OFF 
GO
ALTER DATABASE [applicoreria] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [applicoreria] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [applicoreria] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [applicoreria] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [applicoreria] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [applicoreria] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [applicoreria] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [applicoreria] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [applicoreria] SET  ENABLE_BROKER 
GO
ALTER DATABASE [applicoreria] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [applicoreria] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [applicoreria] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [applicoreria] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [applicoreria] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [applicoreria] SET READ_COMMITTED_SNAPSHOT OFF 
GO
ALTER DATABASE [applicoreria] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [applicoreria] SET RECOVERY FULL 
GO
ALTER DATABASE [applicoreria] SET  MULTI_USER 
GO
ALTER DATABASE [applicoreria] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [applicoreria] SET DB_CHAINING OFF 
GO
ALTER DATABASE [applicoreria] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [applicoreria] SET TARGET_RECOVERY_TIME = 60 SECONDS 
GO
ALTER DATABASE [applicoreria] SET DELAYED_DURABILITY = DISABLED 
GO
ALTER DATABASE [applicoreria] SET ACCELERATED_DATABASE_RECOVERY = OFF  
GO
EXEC sys.sp_db_vardecimal_storage_format N'applicoreria', N'ON'
GO
ALTER DATABASE [applicoreria] SET QUERY_STORE = OFF
GO
USE [applicoreria]
GO
/****** Object:  UserDefinedTableType [dbo].[EDetalle_Compra]    Script Date: 16/11/2022 23:12:37 ******/
CREATE TYPE [dbo].[EDetalle_Compra] AS TABLE(
	[IDPRODUCTO] [int] NULL,
	[PRECIOVENTA] [decimal](10, 2) NULL,
	[CANTIDAD] [int] NULL,
	[MONTO_TOTAL] [decimal](10, 2) NULL,
	[PRECIOCOMPRA] [decimal](10, 2) NOT NULL
)
GO
/****** Object:  UserDefinedTableType [dbo].[EDetalle_Venta]    Script Date: 16/11/2022 23:12:37 ******/
CREATE TYPE [dbo].[EDetalle_Venta] AS TABLE(
	[IDPRODUCTO] [int] NULL,
	[PRECIOVENTA] [decimal](10, 2) NULL,
	[CANTIDAD] [int] NULL,
	[MONTO_TOTAL] [decimal](10, 2) NULL
)
GO
/****** Object:  Table [dbo].[CATEGORIA]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CATEGORIA](
	[IDCATEGORIA] [int] IDENTITY(100,1) NOT NULL,
	[NOMBRECATEGORIA] [varchar](50) NOT NULL,
	[ESTADOCAT] [bit] NULL,
 CONSTRAINT [PK_CATEGORIA_ID] PRIMARY KEY CLUSTERED 
(
	[IDCATEGORIA] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CLIENTES]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CLIENTES](
	[C_IDCLIENTE] [int] IDENTITY(10,1) NOT NULL,
	[C_DOCUMENTO] [varchar](50) NULL,
	[C_NOMBRE] [varchar](80) NULL,
	[C_APELLIDO] [varchar](80) NULL,
	[C_CORREO] [varchar](150) NULL,
	[C_TELEFONO] [varchar](9) NULL,
	[C_ESTADO] [bit] NULL,
	[C_FECHA_REGISTRO] [datetime] NULL,
PRIMARY KEY CLUSTERED 
(
	[C_IDCLIENTE] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[COMPRA]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[COMPRA](
	[ID_COMPRA] [int] IDENTITY(1,1) NOT NULL,
	[U_IDUSUARIO] [int] NULL,
	[IDPROVEEDOR] [int] NULL,
	[TIPO_DOCUMENTO] [varchar](50) NULL,
	[NUMERO_DOCUMENTO] [varchar](50) NULL,
	[MONTO_TOTAL] [decimal](10, 2) NULL,
	[FECHA_REGISTRO] [datetime] NULL,
PRIMARY KEY CLUSTERED 
(
	[ID_COMPRA] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DETALLE_COMPRA]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[DETALLE_COMPRA](
	[ID_DETALLE_COMPRA] [int] IDENTITY(1,1) NOT NULL,
	[ID_COMPRA] [int] NULL,
	[IDPRODUCTO] [int] NULL,
	[PRECIOVENTA] [decimal](10, 2) NULL,
	[CANTIDAD] [int] NULL,
	[MONTO_TOTAL] [decimal](10, 2) NULL,
	[FECHA_REGISTRO] [datetime] NULL,
	[PRECIOCOMPRA] [decimal](10, 2) NULL,
PRIMARY KEY CLUSTERED 
(
	[ID_DETALLE_COMPRA] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DT_PEDIDO]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[DT_PEDIDO](
	[ID_DTPEDIDO] [int] IDENTITY(100,1) NOT NULL,
	[ID_PEDIDO] [int] NOT NULL,
	[ID_PRODUCTO] [int] NOT NULL,
	[PRECIOVENTA] [decimal](10, 2) NULL,
	[CANTIDAD] [int] NULL,
	[MONTO_TOTAL] [decimal](10, 2) NULL,
	[DT_P_FECHA_REGISTRO] [datetime] NULL,
PRIMARY KEY CLUSTERED 
(
	[ID_DTPEDIDO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[NEGOCIO]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[NEGOCIO](
	[IdNegocio] [int] NOT NULL,
	[Nombre] [varchar](60) NULL,
	[RUC] [varchar](11) NULL,
	[Direccion] [varchar](60) NULL,
	[Logo] [varbinary](max) NULL,
PRIMARY KEY CLUSTERED 
(
	[IdNegocio] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PEDIDO]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PEDIDO](
	[ID_PEDIDO] [int] IDENTITY(100,1) NOT NULL,
	[ID_USUARIO] [int] NOT NULL,
	[TIPODOCUMENTO] [varchar](80) NULL,
	[NUMERODOCUMENTO] [varchar](80) NULL,
	[NOMBRE_CLIENTE] [varchar](80) NULL,
	[MONTO_PAGO] [decimal](10, 2) NULL,
	[MOTO_CAMBIO] [decimal](10, 2) NULL,
	[MOTO_TOTAL] [decimal](10, 2) NULL,
	[P_FECHA_REGISTRO] [datetime] NULL,
	[DOCUMENTOCLIENTE] [varchar](80) NULL,
PRIMARY KEY CLUSTERED 
(
	[ID_PEDIDO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PERMISO]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PERMISO](
	[PER_IDPERMISO] [int] IDENTITY(10,1) NOT NULL,
	[PRE_R_ROL] [int] NOT NULL,
	[PER_NOMBREMENU] [varchar](150) NULL,
	[PER_FECHA_REGISTRO] [datetime] NULL,
PRIMARY KEY CLUSTERED 
(
	[PER_IDPERMISO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PRODUCTO]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PRODUCTO](
	[IDPRODUCTO] [int] IDENTITY(10,1) NOT NULL,
	[CODIGO] [varchar](20) NULL,
	[NOMBREPRODUCTO] [varchar](80) NOT NULL,
	[IDCATEGORIA] [int] NULL,
	[PRECIOVENTA] [decimal](10, 2) NULL,
	[PRECIOUNIDAD] [decimal](10, 2) NULL,
	[CANTIDADESTOCK] [int] NOT NULL,
	[DESCRIPCION] [varchar](250) NULL,
	[ESTADO] [bit] NULL,
PRIMARY KEY CLUSTERED 
(
	[IDPRODUCTO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PROVEEDOR]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PROVEEDOR](
	[IDPROVEEDOR] [int] IDENTITY(1,1) NOT NULL,
	[DOCUMENTO] [varchar](50) NULL,
	[RAZONSOCIAL] [varchar](50) NULL,
	[CORREO] [varchar](50) NULL,
	[TELEFONO] [varchar](50) NULL,
	[ESTADO] [bit] NULL,
	[FECHA_REGISTRO] [datetime] NULL,
PRIMARY KEY CLUSTERED 
(
	[IDPROVEEDOR] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ROL]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ROL](
	[R_ROL] [int] IDENTITY(10,1) NOT NULL,
	[R_DESCRIPCION] [varchar](150) NULL,
	[R_FECHA_REGISTRO] [datetime] NULL,
PRIMARY KEY CLUSTERED 
(
	[R_ROL] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[USUARIOS]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[USUARIOS](
	[U_IDUSUARIO] [int] IDENTITY(0,1) NOT NULL,
	[U_DOCUMENTO] [varchar](25) NULL,
	[U_NOMBRE] [varchar](80) NULL,
	[U_APELLIDO] [varchar](80) NULL,
	[U_CORREO] [varchar](80) NULL,
	[U_CLAVE] [varchar](10) NULL,
	[U_ROL] [int] NOT NULL,
	[U_ESTADO] [bit] NULL,
	[U_FECHA_REGISTRO] [datetime] NULL,
PRIMARY KEY CLUSTERED 
(
	[U_IDUSUARIO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
SET IDENTITY_INSERT [dbo].[CATEGORIA] ON 
GO
INSERT [dbo].[CATEGORIA] ([IDCATEGORIA], [NOMBRECATEGORIA], [ESTADOCAT]) VALUES (100, N'LACTEOS', 0)
GO
INSERT [dbo].[CATEGORIA] ([IDCATEGORIA], [NOMBRECATEGORIA], [ESTADOCAT]) VALUES (101, N'VINO', 1)
GO
INSERT [dbo].[CATEGORIA] ([IDCATEGORIA], [NOMBRECATEGORIA], [ESTADOCAT]) VALUES (107, N'RON', 1)
GO
SET IDENTITY_INSERT [dbo].[CATEGORIA] OFF
GO
SET IDENTITY_INSERT [dbo].[CLIENTES] ON 
GO
INSERT [dbo].[CLIENTES] ([C_IDCLIENTE], [C_DOCUMENTO], [C_NOMBRE], [C_APELLIDO], [C_CORREO], [C_TELEFONO], [C_ESTADO], [C_FECHA_REGISTRO]) VALUES (11, N'12345678', N'marcelo', N'nau', N'marcelo123@gmail.com', N'321654987', 1, CAST(N'2022-11-05T22:59:42.927' AS DateTime))
GO
INSERT [dbo].[CLIENTES] ([C_IDCLIENTE], [C_DOCUMENTO], [C_NOMBRE], [C_APELLIDO], [C_CORREO], [C_TELEFONO], [C_ESTADO], [C_FECHA_REGISTRO]) VALUES (1011, N'32165487', N'danny', N'navarrete', N'abc@gmail.com', N'123456789', 1, CAST(N'2022-11-09T04:55:30.357' AS DateTime))
GO
SET IDENTITY_INSERT [dbo].[CLIENTES] OFF
GO
SET IDENTITY_INSERT [dbo].[COMPRA] ON 
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (2, 0, 1, N'Boleta', N'00001', CAST(160.00 AS Decimal(10, 2)), CAST(N'2022-11-08T23:13:02.497' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (3, 0, 1, N'Boleta', N'00002', CAST(56.00 AS Decimal(10, 2)), CAST(N'2022-11-09T04:54:10.687' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (4, 0, 1, N'Boleta', N'00003', CAST(325.00 AS Decimal(10, 2)), CAST(N'2022-11-09T04:56:31.610' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (5, 0, 1, N'Boleta', N'00004', CAST(45.00 AS Decimal(10, 2)), CAST(N'2022-11-09T16:28:09.240' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (6, 0, 1, N'Boleta', N'00005', CAST(1170.00 AS Decimal(10, 2)), CAST(N'2022-11-09T17:25:10.830' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (7, 0, 1, N'Boleta', N'00006', CAST(200.00 AS Decimal(10, 2)), CAST(N'2022-11-09T17:28:49.550' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (8, 0, 1, N'Boleta', N'00007', CAST(50.00 AS Decimal(10, 2)), CAST(N'2022-11-09T17:52:59.887' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (9, 0, 1, N'Boleta', N'00008', CAST(100.00 AS Decimal(10, 2)), CAST(N'2022-11-16T13:40:34.207' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (10, 0, 1, N'Boleta', N'00009', CAST(100.00 AS Decimal(10, 2)), CAST(N'2022-11-16T14:06:50.550' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (11, 0, 1, N'Boleta', N'00010', CAST(150.00 AS Decimal(10, 2)), CAST(N'2022-11-16T14:22:44.980' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (12, 0, 1, N'Boleta', N'00011', CAST(10.00 AS Decimal(10, 2)), CAST(N'2022-11-16T14:33:45.980' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (13, 0, 1, N'Boleta', N'00012', CAST(150.00 AS Decimal(10, 2)), CAST(N'2022-11-16T14:36:03.243' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (14, 0, 1, N'Boleta', N'00013', CAST(50.00 AS Decimal(10, 2)), CAST(N'2022-11-16T14:39:38.960' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (15, 0, 1, N'Boleta', N'00014', CAST(1.00 AS Decimal(10, 2)), CAST(N'2022-11-16T16:23:50.683' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (16, 0, 1, N'Boleta', N'00015', CAST(120.00 AS Decimal(10, 2)), CAST(N'2022-11-16T16:28:03.590' AS DateTime))
GO
INSERT [dbo].[COMPRA] ([ID_COMPRA], [U_IDUSUARIO], [IDPROVEEDOR], [TIPO_DOCUMENTO], [NUMERO_DOCUMENTO], [MONTO_TOTAL], [FECHA_REGISTRO]) VALUES (17, 0, 1, N'Boleta', N'00016', CAST(650.00 AS Decimal(10, 2)), CAST(N'2022-11-16T16:35:44.457' AS DateTime))
GO
SET IDENTITY_INSERT [dbo].[COMPRA] OFF
GO
SET IDENTITY_INSERT [dbo].[DETALLE_COMPRA] ON 
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (4, 2, 10, CAST(10.00 AS Decimal(10, 2)), 52, CAST(5.20 AS Decimal(10, 2)), CAST(N'2022-11-08T23:13:02.497' AS DateTime), CAST(6.00 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (5, 2, 11, CAST(15.00 AS Decimal(10, 2)), 108, CAST(7.20 AS Decimal(10, 2)), CAST(N'2022-11-08T23:13:02.497' AS DateTime), CAST(8.00 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (6, 3, 10, CAST(10.00 AS Decimal(10, 2)), 56, CAST(5.60 AS Decimal(10, 2)), CAST(N'2022-11-09T04:54:10.687' AS DateTime), CAST(7.20 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (7, 4, 10, CAST(10.00 AS Decimal(10, 2)), 325, CAST(32.50 AS Decimal(10, 2)), CAST(N'2022-11-09T04:56:31.610' AS DateTime), CAST(35.00 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (8, 5, 10, CAST(10.00 AS Decimal(10, 2)), 45, CAST(4.50 AS Decimal(10, 2)), CAST(N'2022-11-09T16:28:09.240' AS DateTime), CAST(5.20 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (9, 6, 11, CAST(15.00 AS Decimal(10, 2)), 1170, CAST(78.00 AS Decimal(10, 2)), CAST(N'2022-11-09T17:25:10.830' AS DateTime), CAST(90.00 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (10, 7, 10, CAST(10.00 AS Decimal(10, 2)), 200, CAST(20.00 AS Decimal(10, 2)), CAST(N'2022-11-09T17:28:49.550' AS DateTime), CAST(25.00 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (11, 8, 10, CAST(6.00 AS Decimal(10, 2)), 10, CAST(50.00 AS Decimal(10, 2)), CAST(N'2022-11-09T17:52:59.887' AS DateTime), CAST(5.00 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (12, 9, 10, CAST(20.00 AS Decimal(10, 2)), 10, CAST(100.00 AS Decimal(10, 2)), CAST(N'2022-11-16T13:40:34.207' AS DateTime), NULL)
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (13, 10, 10, CAST(20.00 AS Decimal(10, 2)), 10, CAST(100.00 AS Decimal(10, 2)), CAST(N'2022-11-16T14:06:50.550' AS DateTime), NULL)
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (14, 11, 11, CAST(20.00 AS Decimal(10, 2)), 10, CAST(150.00 AS Decimal(10, 2)), CAST(N'2022-11-16T14:22:44.980' AS DateTime), NULL)
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (15, 12, 10, CAST(10.00 AS Decimal(10, 2)), 15, CAST(1.00 AS Decimal(10, 2)), CAST(N'2022-11-16T14:33:45.980' AS DateTime), CAST(10.00 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (16, 13, 10, CAST(30.00 AS Decimal(10, 2)), 35, CAST(5.00 AS Decimal(10, 2)), CAST(N'2022-11-16T14:36:03.243' AS DateTime), CAST(150.00 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (17, 14, 10, CAST(15.00 AS Decimal(10, 2)), 5, CAST(50.00 AS Decimal(10, 2)), CAST(N'2022-11-16T14:39:38.960' AS DateTime), CAST(10.00 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (18, 15, 10, CAST(600.00 AS Decimal(10, 2)), 999, CAST(499500.00 AS Decimal(10, 2)), CAST(N'2022-11-16T16:23:50.683' AS DateTime), CAST(500.00 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (19, 16, 10, CAST(20.00 AS Decimal(10, 2)), 8, CAST(120.00 AS Decimal(10, 2)), CAST(N'2022-11-16T16:28:03.590' AS DateTime), CAST(15.00 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (20, 17, 10, CAST(25.00 AS Decimal(10, 2)), 10, CAST(200.00 AS Decimal(10, 2)), CAST(N'2022-11-16T16:35:44.457' AS DateTime), CAST(20.00 AS Decimal(10, 2)))
GO
INSERT [dbo].[DETALLE_COMPRA] ([ID_DETALLE_COMPRA], [ID_COMPRA], [IDPRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [FECHA_REGISTRO], [PRECIOCOMPRA]) VALUES (21, 17, 11, CAST(35.00 AS Decimal(10, 2)), 15, CAST(450.00 AS Decimal(10, 2)), CAST(N'2022-11-16T16:35:44.457' AS DateTime), CAST(30.00 AS Decimal(10, 2)))
GO
SET IDENTITY_INSERT [dbo].[DETALLE_COMPRA] OFF
GO
SET IDENTITY_INSERT [dbo].[DT_PEDIDO] ON 
GO
INSERT [dbo].[DT_PEDIDO] ([ID_DTPEDIDO], [ID_PEDIDO], [ID_PRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [DT_P_FECHA_REGISTRO]) VALUES (100, 101, 10, CAST(24.00 AS Decimal(10, 2)), 240, NULL, CAST(N'2022-11-09T22:21:20.240' AS DateTime))
GO
INSERT [dbo].[DT_PEDIDO] ([ID_DTPEDIDO], [ID_PEDIDO], [ID_PRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [DT_P_FECHA_REGISTRO]) VALUES (101, 102, 10, CAST(1.00 AS Decimal(10, 2)), 10, NULL, CAST(N'2022-11-09T22:23:44.077' AS DateTime))
GO
INSERT [dbo].[DT_PEDIDO] ([ID_DTPEDIDO], [ID_PEDIDO], [ID_PRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [DT_P_FECHA_REGISTRO]) VALUES (102, 103, 11, CAST(1.00 AS Decimal(10, 2)), 15, NULL, CAST(N'2022-11-09T22:27:24.590' AS DateTime))
GO
INSERT [dbo].[DT_PEDIDO] ([ID_DTPEDIDO], [ID_PEDIDO], [ID_PRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [DT_P_FECHA_REGISTRO]) VALUES (103, 104, 10, CAST(1.00 AS Decimal(10, 2)), 10, NULL, CAST(N'2022-11-09T22:28:21.260' AS DateTime))
GO
INSERT [dbo].[DT_PEDIDO] ([ID_DTPEDIDO], [ID_PEDIDO], [ID_PRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [DT_P_FECHA_REGISTRO]) VALUES (104, 105, 10, CAST(1.00 AS Decimal(10, 2)), 10, CAST(10.00 AS Decimal(10, 2)), CAST(N'2022-11-09T22:30:26.890' AS DateTime))
GO
INSERT [dbo].[DT_PEDIDO] ([ID_DTPEDIDO], [ID_PEDIDO], [ID_PRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [DT_P_FECHA_REGISTRO]) VALUES (105, 106, 10, CAST(10.00 AS Decimal(10, 2)), 100, CAST(100.00 AS Decimal(10, 2)), CAST(N'2022-11-16T13:27:34.293' AS DateTime))
GO
INSERT [dbo].[DT_PEDIDO] ([ID_DTPEDIDO], [ID_PEDIDO], [ID_PRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [DT_P_FECHA_REGISTRO]) VALUES (106, 107, 10, CAST(5.00 AS Decimal(10, 2)), 75, CAST(75.00 AS Decimal(10, 2)), CAST(N'2022-11-16T14:49:45.440' AS DateTime))
GO
INSERT [dbo].[DT_PEDIDO] ([ID_DTPEDIDO], [ID_PEDIDO], [ID_PRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [DT_P_FECHA_REGISTRO]) VALUES (107, 108, 10, CAST(25.00 AS Decimal(10, 2)), 10, CAST(250.00 AS Decimal(10, 2)), CAST(N'2022-11-16T17:08:03.977' AS DateTime))
GO
INSERT [dbo].[DT_PEDIDO] ([ID_DTPEDIDO], [ID_PEDIDO], [ID_PRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [DT_P_FECHA_REGISTRO]) VALUES (108, 109, 10, CAST(25.00 AS Decimal(10, 2)), 5, CAST(125.00 AS Decimal(10, 2)), CAST(N'2022-11-16T17:48:12.723' AS DateTime))
GO
INSERT [dbo].[DT_PEDIDO] ([ID_DTPEDIDO], [ID_PEDIDO], [ID_PRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [DT_P_FECHA_REGISTRO]) VALUES (109, 110, 10, CAST(25.00 AS Decimal(10, 2)), 5, CAST(125.00 AS Decimal(10, 2)), CAST(N'2022-11-16T17:55:40.983' AS DateTime))
GO
INSERT [dbo].[DT_PEDIDO] ([ID_DTPEDIDO], [ID_PEDIDO], [ID_PRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [DT_P_FECHA_REGISTRO]) VALUES (110, 111, 10, CAST(25.00 AS Decimal(10, 2)), 1, CAST(25.00 AS Decimal(10, 2)), CAST(N'2022-11-16T17:57:23.120' AS DateTime))
GO
INSERT [dbo].[DT_PEDIDO] ([ID_DTPEDIDO], [ID_PEDIDO], [ID_PRODUCTO], [PRECIOVENTA], [CANTIDAD], [MONTO_TOTAL], [DT_P_FECHA_REGISTRO]) VALUES (111, 112, 10, CAST(25.00 AS Decimal(10, 2)), 13, CAST(325.00 AS Decimal(10, 2)), CAST(N'2022-11-16T18:02:27.830' AS DateTime))
GO
SET IDENTITY_INSERT [dbo].[DT_PEDIDO] OFF
GO
INSERT [dbo].[NEGOCIO] ([IdNegocio], [Nombre], [RUC], [Direccion], [Logo]) VALUES (1, N'EMPRESA DMRS', N'10101010101', N'Av.Codigo A la bica dile no', 0x89504E470D0A1A0A0000000D49484452000000140000001408060000008D891D0D000000097048597300000B1300000B1301009A9C18000001E949444154388DADD43168135118C0F1FF7B692F5C6A6DC15434205804AD428D3483ABC9A84253698A539D44143A54697071E8AA900E0507279BA5D8A4F43AD8ADB6A34B271D8A4B70C96032582577E4E4FA1C2E24C7253677EAB7BDEFBDF77BDFE3BE77825EB1B013E548CF22C8022920D19AA90207280C462C83D5DB4DFF56D185CDEFCD2278098CF73CAC131514798AE9726F30B71121167F0562B10FE40BB582595FA234E7000CB4F37F8501884586CE2AE059A742F79AA5F098B7507214D365C1C24E941FFA2170F19F40A860D62624477A362CA60D485ECF5FE6CAB998373D8E3E36235BAD110A7BF7E41A8F33093E3C4F12D3229D49A1A6256E9F85C2B2537100968DAF98B6E3592153924ED30270F7C6193EBE98223E3C7822F6E8ED17DEEC577D47AA84F40E87A2118A0FAF72F3D26976F3C9361A0C6BD588FB9C0068341DEEAD7EC6B41DAE5F38C56E3EC9F9512D3006A22A78B0B70EDCF7A66F4D8CF2FEE924312D82651FA36B320006A0D6250AC39FDE3FFCCE9DC2274CDB0981014A6C4B462C03A8FC096D349D601854B06A5B7D9F5E7C7890FACF5FFD3040CDB296D974EF534C9741ADF45A160813A2C05A6613DCAFEC86595F4288428052BAB1C6B77C7BD8B5E0BFFD60BD91DBD0D0C766106A1A640A54EB35892A1C1FA0C436566D8BD29CEDDFFA1B1DFEAF8833390B2F0000000049454E44AE426082)
GO
SET IDENTITY_INSERT [dbo].[PEDIDO] ON 
GO
INSERT [dbo].[PEDIDO] ([ID_PEDIDO], [ID_USUARIO], [TIPODOCUMENTO], [NUMERODOCUMENTO], [NOMBRE_CLIENTE], [MONTO_PAGO], [MOTO_CAMBIO], [MOTO_TOTAL], [P_FECHA_REGISTRO], [DOCUMENTOCLIENTE]) VALUES (101, 0, N'Boleta', N'00001', N'Boleta', CAST(240.00 AS Decimal(10, 2)), CAST(240.00 AS Decimal(10, 2)), CAST(240.00 AS Decimal(10, 2)), CAST(N'2022-11-09T22:21:20.240' AS DateTime), NULL)
GO
INSERT [dbo].[PEDIDO] ([ID_PEDIDO], [ID_USUARIO], [TIPODOCUMENTO], [NUMERODOCUMENTO], [NOMBRE_CLIENTE], [MONTO_PAGO], [MOTO_CAMBIO], [MOTO_TOTAL], [P_FECHA_REGISTRO], [DOCUMENTOCLIENTE]) VALUES (102, 0, N'Boleta', N'00002', N'Boleta', CAST(10.00 AS Decimal(10, 2)), CAST(10.00 AS Decimal(10, 2)), CAST(10.00 AS Decimal(10, 2)), CAST(N'2022-11-09T22:23:44.077' AS DateTime), NULL)
GO
INSERT [dbo].[PEDIDO] ([ID_PEDIDO], [ID_USUARIO], [TIPODOCUMENTO], [NUMERODOCUMENTO], [NOMBRE_CLIENTE], [MONTO_PAGO], [MOTO_CAMBIO], [MOTO_TOTAL], [P_FECHA_REGISTRO], [DOCUMENTOCLIENTE]) VALUES (103, 0, N'Boleta', N'00003', N'Boleta', CAST(15.00 AS Decimal(10, 2)), CAST(15.00 AS Decimal(10, 2)), CAST(15.00 AS Decimal(10, 2)), CAST(N'2022-11-09T22:27:24.590' AS DateTime), NULL)
GO
INSERT [dbo].[PEDIDO] ([ID_PEDIDO], [ID_USUARIO], [TIPODOCUMENTO], [NUMERODOCUMENTO], [NOMBRE_CLIENTE], [MONTO_PAGO], [MOTO_CAMBIO], [MOTO_TOTAL], [P_FECHA_REGISTRO], [DOCUMENTOCLIENTE]) VALUES (104, 0, N'Boleta', N'00004', N'Boleta', CAST(10.00 AS Decimal(10, 2)), CAST(10.00 AS Decimal(10, 2)), CAST(10.00 AS Decimal(10, 2)), CAST(N'2022-11-09T22:28:21.260' AS DateTime), NULL)
GO
INSERT [dbo].[PEDIDO] ([ID_PEDIDO], [ID_USUARIO], [TIPODOCUMENTO], [NUMERODOCUMENTO], [NOMBRE_CLIENTE], [MONTO_PAGO], [MOTO_CAMBIO], [MOTO_TOTAL], [P_FECHA_REGISTRO], [DOCUMENTOCLIENTE]) VALUES (105, 0, N'Boleta', N'00005', N'Boleta', CAST(10.00 AS Decimal(10, 2)), CAST(10.00 AS Decimal(10, 2)), CAST(10.00 AS Decimal(10, 2)), CAST(N'2022-11-09T22:30:26.890' AS DateTime), NULL)
GO
INSERT [dbo].[PEDIDO] ([ID_PEDIDO], [ID_USUARIO], [TIPODOCUMENTO], [NUMERODOCUMENTO], [NOMBRE_CLIENTE], [MONTO_PAGO], [MOTO_CAMBIO], [MOTO_TOTAL], [P_FECHA_REGISTRO], [DOCUMENTOCLIENTE]) VALUES (106, 0, N'Boleta', N'00006', N'Boleta', CAST(100.00 AS Decimal(10, 2)), CAST(100.00 AS Decimal(10, 2)), CAST(100.00 AS Decimal(10, 2)), CAST(N'2022-11-16T13:27:34.270' AS DateTime), NULL)
GO
INSERT [dbo].[PEDIDO] ([ID_PEDIDO], [ID_USUARIO], [TIPODOCUMENTO], [NUMERODOCUMENTO], [NOMBRE_CLIENTE], [MONTO_PAGO], [MOTO_CAMBIO], [MOTO_TOTAL], [P_FECHA_REGISTRO], [DOCUMENTOCLIENTE]) VALUES (107, 0, N'Boleta', N'00007', N'Boleta', CAST(75.00 AS Decimal(10, 2)), CAST(75.00 AS Decimal(10, 2)), CAST(75.00 AS Decimal(10, 2)), CAST(N'2022-11-16T14:49:45.440' AS DateTime), NULL)
GO
INSERT [dbo].[PEDIDO] ([ID_PEDIDO], [ID_USUARIO], [TIPODOCUMENTO], [NUMERODOCUMENTO], [NOMBRE_CLIENTE], [MONTO_PAGO], [MOTO_CAMBIO], [MOTO_TOTAL], [P_FECHA_REGISTRO], [DOCUMENTOCLIENTE]) VALUES (108, 0, N'Boleta', N'00008', N'Boleta', CAST(250.00 AS Decimal(10, 2)), CAST(250.00 AS Decimal(10, 2)), CAST(250.00 AS Decimal(10, 2)), CAST(N'2022-11-16T17:08:03.977' AS DateTime), NULL)
GO
INSERT [dbo].[PEDIDO] ([ID_PEDIDO], [ID_USUARIO], [TIPODOCUMENTO], [NUMERODOCUMENTO], [NOMBRE_CLIENTE], [MONTO_PAGO], [MOTO_CAMBIO], [MOTO_TOTAL], [P_FECHA_REGISTRO], [DOCUMENTOCLIENTE]) VALUES (109, 0, N'Boleta', N'00009', N'Boleta', CAST(125.00 AS Decimal(10, 2)), CAST(125.00 AS Decimal(10, 2)), CAST(125.00 AS Decimal(10, 2)), CAST(N'2022-11-16T17:48:12.720' AS DateTime), NULL)
GO
INSERT [dbo].[PEDIDO] ([ID_PEDIDO], [ID_USUARIO], [TIPODOCUMENTO], [NUMERODOCUMENTO], [NOMBRE_CLIENTE], [MONTO_PAGO], [MOTO_CAMBIO], [MOTO_TOTAL], [P_FECHA_REGISTRO], [DOCUMENTOCLIENTE]) VALUES (110, 0, N'Boleta', N'00010', N'marcelo', CAST(125.00 AS Decimal(10, 2)), CAST(125.00 AS Decimal(10, 2)), CAST(125.00 AS Decimal(10, 2)), CAST(N'2022-11-16T17:55:40.983' AS DateTime), NULL)
GO
INSERT [dbo].[PEDIDO] ([ID_PEDIDO], [ID_USUARIO], [TIPODOCUMENTO], [NUMERODOCUMENTO], [NOMBRE_CLIENTE], [MONTO_PAGO], [MOTO_CAMBIO], [MOTO_TOTAL], [P_FECHA_REGISTRO], [DOCUMENTOCLIENTE]) VALUES (111, 0, N'Boleta', N'00011', N'marcelo', CAST(70.00 AS Decimal(10, 2)), CAST(45.00 AS Decimal(10, 2)), CAST(25.00 AS Decimal(10, 2)), CAST(N'2022-11-16T17:57:23.120' AS DateTime), NULL)
GO
INSERT [dbo].[PEDIDO] ([ID_PEDIDO], [ID_USUARIO], [TIPODOCUMENTO], [NUMERODOCUMENTO], [NOMBRE_CLIENTE], [MONTO_PAGO], [MOTO_CAMBIO], [MOTO_TOTAL], [P_FECHA_REGISTRO], [DOCUMENTOCLIENTE]) VALUES (112, 0, N'Boleta', N'00012', N'marcelo', CAST(400.00 AS Decimal(10, 2)), CAST(75.00 AS Decimal(10, 2)), CAST(325.00 AS Decimal(10, 2)), CAST(N'2022-11-16T18:02:27.830' AS DateTime), N'12345678')
GO
SET IDENTITY_INSERT [dbo].[PEDIDO] OFF
GO
SET IDENTITY_INSERT [dbo].[PERMISO] ON 
GO
INSERT [dbo].[PERMISO] ([PER_IDPERMISO], [PRE_R_ROL], [PER_NOMBREMENU], [PER_FECHA_REGISTRO]) VALUES (21, 10, N'menuUsuarios', CAST(N'2022-11-05T22:55:44.923' AS DateTime))
GO
INSERT [dbo].[PERMISO] ([PER_IDPERMISO], [PRE_R_ROL], [PER_NOMBREMENU], [PER_FECHA_REGISTRO]) VALUES (22, 10, N'menuMantenedor', CAST(N'2022-11-05T22:55:44.923' AS DateTime))
GO
INSERT [dbo].[PERMISO] ([PER_IDPERMISO], [PRE_R_ROL], [PER_NOMBREMENU], [PER_FECHA_REGISTRO]) VALUES (23, 10, N'menuVentas', CAST(N'2022-11-05T22:55:44.923' AS DateTime))
GO
INSERT [dbo].[PERMISO] ([PER_IDPERMISO], [PRE_R_ROL], [PER_NOMBREMENU], [PER_FECHA_REGISTRO]) VALUES (24, 10, N'menuClientes', CAST(N'2022-11-05T22:55:44.923' AS DateTime))
GO
INSERT [dbo].[PERMISO] ([PER_IDPERMISO], [PRE_R_ROL], [PER_NOMBREMENU], [PER_FECHA_REGISTRO]) VALUES (25, 10, N'menuReportes', CAST(N'2022-11-05T22:55:44.923' AS DateTime))
GO
INSERT [dbo].[PERMISO] ([PER_IDPERMISO], [PRE_R_ROL], [PER_NOMBREMENU], [PER_FECHA_REGISTRO]) VALUES (26, 10, N'menuCompras', CAST(N'2022-11-05T22:55:44.923' AS DateTime))
GO
INSERT [dbo].[PERMISO] ([PER_IDPERMISO], [PRE_R_ROL], [PER_NOMBREMENU], [PER_FECHA_REGISTRO]) VALUES (27, 10, N'menuProveedor', CAST(N'2022-11-05T22:55:44.923' AS DateTime))
GO
INSERT [dbo].[PERMISO] ([PER_IDPERMISO], [PRE_R_ROL], [PER_NOMBREMENU], [PER_FECHA_REGISTRO]) VALUES (28, 11, N'menuVentas', CAST(N'2022-11-05T22:55:44.923' AS DateTime))
GO
INSERT [dbo].[PERMISO] ([PER_IDPERMISO], [PRE_R_ROL], [PER_NOMBREMENU], [PER_FECHA_REGISTRO]) VALUES (29, 11, N'menuClientes', CAST(N'2022-11-05T22:55:44.923' AS DateTime))
GO
INSERT [dbo].[PERMISO] ([PER_IDPERMISO], [PRE_R_ROL], [PER_NOMBREMENU], [PER_FECHA_REGISTRO]) VALUES (30, 11, N'menuCompras', CAST(N'2022-11-05T22:55:44.923' AS DateTime))
GO
INSERT [dbo].[PERMISO] ([PER_IDPERMISO], [PRE_R_ROL], [PER_NOMBREMENU], [PER_FECHA_REGISTRO]) VALUES (31, 11, N'menuProveedor', CAST(N'2022-11-05T22:55:44.923' AS DateTime))
GO
SET IDENTITY_INSERT [dbo].[PERMISO] OFF
GO
SET IDENTITY_INSERT [dbo].[PRODUCTO] ON 
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [CODIGO], [NOMBREPRODUCTO], [IDCATEGORIA], [PRECIOVENTA], [PRECIOUNIDAD], [CANTIDADESTOCK], [DESCRIPCION], [ESTADO]) VALUES (10, N'123456', N'RED LABELL', 107, CAST(25.00 AS Decimal(10, 2)), CAST(20.00 AS Decimal(10, 2)), 1960, N'WHISKY', 1)
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [CODIGO], [NOMBREPRODUCTO], [IDCATEGORIA], [PRECIOVENTA], [PRECIOUNIDAD], [CANTIDADESTOCK], [DESCRIPCION], [ESTADO]) VALUES (11, N'132654', N'asd', 101, CAST(35.00 AS Decimal(10, 2)), CAST(30.00 AS Decimal(10, 2)), 1613, N'adw', 1)
GO
INSERT [dbo].[PRODUCTO] ([IDPRODUCTO], [CODIGO], [NOMBREPRODUCTO], [IDCATEGORIA], [PRECIOVENTA], [PRECIOUNIDAD], [CANTIDADESTOCK], [DESCRIPCION], [ESTADO]) VALUES (20, N'1234', N'ab', 101, CAST(0.10 AS Decimal(10, 2)), CAST(0.00 AS Decimal(10, 2)), 0, N'awdadw', 1)
GO
SET IDENTITY_INSERT [dbo].[PRODUCTO] OFF
GO
SET IDENTITY_INSERT [dbo].[PROVEEDOR] ON 
GO
INSERT [dbo].[PROVEEDOR] ([IDPROVEEDOR], [DOCUMENTO], [RAZONSOCIAL], [CORREO], [TELEFONO], [ESTADO], [FECHA_REGISTRO]) VALUES (1, N'12345678', N'alds123', N'añdw@gmail.com', N'456789123', 0, CAST(N'2022-11-07T13:44:13.070' AS DateTime))
GO
SET IDENTITY_INSERT [dbo].[PROVEEDOR] OFF
GO
SET IDENTITY_INSERT [dbo].[ROL] ON 
GO
INSERT [dbo].[ROL] ([R_ROL], [R_DESCRIPCION], [R_FECHA_REGISTRO]) VALUES (10, N'ADMINISTRADOR', CAST(N'2022-11-05T22:25:03.027' AS DateTime))
GO
INSERT [dbo].[ROL] ([R_ROL], [R_DESCRIPCION], [R_FECHA_REGISTRO]) VALUES (11, N'EMPLEADO', CAST(N'2022-11-05T22:25:03.030' AS DateTime))
GO
SET IDENTITY_INSERT [dbo].[ROL] OFF
GO
SET IDENTITY_INSERT [dbo].[USUARIOS] ON 
GO
INSERT [dbo].[USUARIOS] ([U_IDUSUARIO], [U_DOCUMENTO], [U_NOMBRE], [U_APELLIDO], [U_CORREO], [U_CLAVE], [U_ROL], [U_ESTADO], [U_FECHA_REGISTRO]) VALUES (0, N'121212', N'MARCELO', N'ROJAS', N'@GMAIL.COM', N'123', 10, 1, CAST(N'2022-11-05T22:25:21.400' AS DateTime))
GO
INSERT [dbo].[USUARIOS] ([U_IDUSUARIO], [U_DOCUMENTO], [U_NOMBRE], [U_APELLIDO], [U_CORREO], [U_CLAVE], [U_ROL], [U_ESTADO], [U_FECHA_REGISTRO]) VALUES (1, N'67676764', N'ADMIN', N'R1', N'ADMIN@GMAIL.COM', N'123', 11, 1, CAST(N'2022-11-05T22:25:21.410' AS DateTime))
GO
INSERT [dbo].[USUARIOS] ([U_IDUSUARIO], [U_DOCUMENTO], [U_NOMBRE], [U_APELLIDO], [U_CORREO], [U_CLAVE], [U_ROL], [U_ESTADO], [U_FECHA_REGISTRO]) VALUES (2, N'101010', N'ADMIN', N'ADMIN', N'123N@GMAIL.COM', N'123', 11, 1, CAST(N'2022-11-05T22:25:21.410' AS DateTime))
GO
INSERT [dbo].[USUARIOS] ([U_IDUSUARIO], [U_DOCUMENTO], [U_NOMBRE], [U_APELLIDO], [U_CORREO], [U_CLAVE], [U_ROL], [U_ESTADO], [U_FECHA_REGISTRO]) VALUES (3, N'121212', N'MARCELO', N'ROJAS', N'@GMAIL.COM', N'123', 10, 1, CAST(N'2022-11-05T22:56:02.423' AS DateTime))
GO
INSERT [dbo].[USUARIOS] ([U_IDUSUARIO], [U_DOCUMENTO], [U_NOMBRE], [U_APELLIDO], [U_CORREO], [U_CLAVE], [U_ROL], [U_ESTADO], [U_FECHA_REGISTRO]) VALUES (4, N'67676764', N'ADMIN', N'R1', N'ADMIN@GMAIL.COM', N'123', 11, 1, CAST(N'2022-11-05T22:56:02.423' AS DateTime))
GO
INSERT [dbo].[USUARIOS] ([U_IDUSUARIO], [U_DOCUMENTO], [U_NOMBRE], [U_APELLIDO], [U_CORREO], [U_CLAVE], [U_ROL], [U_ESTADO], [U_FECHA_REGISTRO]) VALUES (5, N'101010', N'ADMIN', N'ADMIN', N'123N@GMAIL.COM', N'123', 11, 1, CAST(N'2022-11-05T22:56:02.423' AS DateTime))
GO
INSERT [dbo].[USUARIOS] ([U_IDUSUARIO], [U_DOCUMENTO], [U_NOMBRE], [U_APELLIDO], [U_CORREO], [U_CLAVE], [U_ROL], [U_ESTADO], [U_FECHA_REGISTRO]) VALUES (1001, N'12345678', N'Renzo', N'Vergaray', N'964@gmail.com', N'1234', 10, 1, CAST(N'2022-11-16T18:41:37.850' AS DateTime))
GO
SET IDENTITY_INSERT [dbo].[USUARIOS] OFF
GO
ALTER TABLE [dbo].[CLIENTES] ADD  DEFAULT (getdate()) FOR [C_FECHA_REGISTRO]
GO
ALTER TABLE [dbo].[COMPRA] ADD  DEFAULT (getdate()) FOR [FECHA_REGISTRO]
GO
ALTER TABLE [dbo].[DETALLE_COMPRA] ADD  DEFAULT ((0)) FOR [PRECIOVENTA]
GO
ALTER TABLE [dbo].[DETALLE_COMPRA] ADD  DEFAULT (getdate()) FOR [FECHA_REGISTRO]
GO
ALTER TABLE [dbo].[DT_PEDIDO] ADD  DEFAULT ((0.1)) FOR [PRECIOVENTA]
GO
ALTER TABLE [dbo].[DT_PEDIDO] ADD  DEFAULT (getdate()) FOR [DT_P_FECHA_REGISTRO]
GO
ALTER TABLE [dbo].[PEDIDO] ADD  DEFAULT (getdate()) FOR [P_FECHA_REGISTRO]
GO
ALTER TABLE [dbo].[PERMISO] ADD  DEFAULT (getdate()) FOR [PER_FECHA_REGISTRO]
GO
ALTER TABLE [dbo].[PRODUCTO] ADD  DEFAULT ((0.1)) FOR [PRECIOVENTA]
GO
ALTER TABLE [dbo].[PRODUCTO] ADD  DEFAULT ((0)) FOR [PRECIOUNIDAD]
GO
ALTER TABLE [dbo].[PRODUCTO] ADD  CONSTRAINT [DF_dbo_default]  DEFAULT ((0)) FOR [CANTIDADESTOCK]
GO
ALTER TABLE [dbo].[PROVEEDOR] ADD  DEFAULT (getdate()) FOR [FECHA_REGISTRO]
GO
ALTER TABLE [dbo].[ROL] ADD  DEFAULT (getdate()) FOR [R_FECHA_REGISTRO]
GO
ALTER TABLE [dbo].[USUARIOS] ADD  DEFAULT (getdate()) FOR [U_FECHA_REGISTRO]
GO
ALTER TABLE [dbo].[COMPRA]  WITH CHECK ADD FOREIGN KEY([IDPROVEEDOR])
REFERENCES [dbo].[PROVEEDOR] ([IDPROVEEDOR])
GO
ALTER TABLE [dbo].[COMPRA]  WITH CHECK ADD FOREIGN KEY([U_IDUSUARIO])
REFERENCES [dbo].[USUARIOS] ([U_IDUSUARIO])
GO
ALTER TABLE [dbo].[DETALLE_COMPRA]  WITH CHECK ADD FOREIGN KEY([ID_COMPRA])
REFERENCES [dbo].[COMPRA] ([ID_COMPRA])
GO
ALTER TABLE [dbo].[DETALLE_COMPRA]  WITH CHECK ADD FOREIGN KEY([IDPRODUCTO])
REFERENCES [dbo].[PRODUCTO] ([IDPRODUCTO])
GO
ALTER TABLE [dbo].[DT_PEDIDO]  WITH CHECK ADD  CONSTRAINT [FK_PEDIDO] FOREIGN KEY([ID_PEDIDO])
REFERENCES [dbo].[PEDIDO] ([ID_PEDIDO])
GO
ALTER TABLE [dbo].[DT_PEDIDO] CHECK CONSTRAINT [FK_PEDIDO]
GO
ALTER TABLE [dbo].[DT_PEDIDO]  WITH CHECK ADD  CONSTRAINT [FK_PRODUCTO] FOREIGN KEY([ID_PRODUCTO])
REFERENCES [dbo].[PRODUCTO] ([IDPRODUCTO])
GO
ALTER TABLE [dbo].[DT_PEDIDO] CHECK CONSTRAINT [FK_PRODUCTO]
GO
ALTER TABLE [dbo].[PEDIDO]  WITH CHECK ADD  CONSTRAINT [FK_USUARIO] FOREIGN KEY([ID_USUARIO])
REFERENCES [dbo].[USUARIOS] ([U_IDUSUARIO])
GO
ALTER TABLE [dbo].[PEDIDO] CHECK CONSTRAINT [FK_USUARIO]
GO
ALTER TABLE [dbo].[PERMISO]  WITH CHECK ADD  CONSTRAINT [FK_PERMISOS_ROL] FOREIGN KEY([PRE_R_ROL])
REFERENCES [dbo].[ROL] ([R_ROL])
GO
ALTER TABLE [dbo].[PERMISO] CHECK CONSTRAINT [FK_PERMISOS_ROL]
GO
ALTER TABLE [dbo].[PRODUCTO]  WITH CHECK ADD  CONSTRAINT [FK_PRODUCTO_IDCATE] FOREIGN KEY([IDCATEGORIA])
REFERENCES [dbo].[CATEGORIA] ([IDCATEGORIA])
GO
ALTER TABLE [dbo].[PRODUCTO] CHECK CONSTRAINT [FK_PRODUCTO_IDCATE]
GO
ALTER TABLE [dbo].[USUARIOS]  WITH CHECK ADD  CONSTRAINT [FK_ROL] FOREIGN KEY([U_ROL])
REFERENCES [dbo].[ROL] ([R_ROL])
GO
ALTER TABLE [dbo].[USUARIOS] CHECK CONSTRAINT [FK_ROL]
GO
/****** Object:  StoredProcedure [dbo].[SP_EditarCategoria]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create procedure [dbo].[SP_EditarCategoria](
@IdCategoria int,
@Estado bit,
@Descripcion varchar(50),
@Resultado bit output,
@Mensaje varchar (500) output

)as
begin
	SET @Resultado = 1
	IF NOT EXISTS (SELECT * FROM CATEGORIA WHERE NOMBRECATEGORIA = @Descripcion and IdCategoria != @IdCategoria)

	update CATEGORIA set
	NOMBRECATEGORIA = @Descripcion,
	ESTADOCAT = @Estado
	where IdCategoria = @IdCategoria

	ELSE
	begin
	SET @Resultado = 0
	set @Mensaje = 'No se puede repetir la descripcion de una categoria'

	end
end

GO
/****** Object:  StoredProcedure [dbo].[SP_EDITARUSUARIO]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
Create PROC [dbo].[SP_EDITARUSUARIO](
@idusuario int,
@documento varchar(25),
@nombre varchar(80),
@apellido varchar(80),
@correo varchar(80),
@clave varchar(50),
@idrol int,
@estado bit,
@Respuesta bit output,
@Mensaje varchar(500) output)
as
begin
	set @Respuesta = 0
	set @Mensaje=''

	if not exists (select*from USUARIOS where U_DOCUMENTO=@documento and U_IDUSUARIO!=@idusuario)
	begin 
		update USUARIOS set 
		U_DOCUMENTO = @documento,
		U_NOMBRE =@nombre,
		U_APELLIDO = @apellido,
		U_CORREO = @correo,
		U_CLAVE = @clave,
		U_ROL =@idrol,
		U_ESTADO =@estado
		where U_IDUSUARIO = @idusuario

		set @Respuesta = 1
	end
	else
		set @Mensaje='No se puede repetir el documento para mas de un usuario'
end
GO
/****** Object:  StoredProcedure [dbo].[SP_EliminarCategoria]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create procedure [dbo].[SP_EliminarCategoria](
@IdCategoria int,

@Resultado bit output,
@Mensaje varchar (500) output
)
as
begin
	SET @Resultado = 1
	IF NOT EXISTS (
	SELECT * FROM CATEGORIA c
	inner join PRODUCTO p on p.IdCategoria = c.IdCategoria
	where c.IdCategoria = @IdCategoria
	)
	begin
	delete top (1) from CATEGORIA where IdCategoria = @IdCategoria
	end

	ELSE
	begin
	SET @Resultado = 0
	set @Mensaje = 'No se puede repetir la descripcion de una categoria'

	end
end
GO
/****** Object:  StoredProcedure [dbo].[SP_EliminarProducto]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


--eliminar producto
create PROC [dbo].[SP_EliminarProducto](
@IdProducto int,
@Respuesta bit output,
@Mensaje varchar (500) output
)
as
begin
	set @Respuesta = 0
	set @Mensaje = ''
	declare @pasoreglas bit =1

	/*IF EXISTS (SELECT * FROM DT_PEDIDO dc
	INNER JOIN PRODUCTO p ON p.IDPRODUCTO = dc.ID_PRODUCTO
	WHERE p.IDPRODUCTO = @IdProducto
	)
	BEGIN
		set @pasoreglas = 0
		set @Respuesta = 0
		set @Mensaje = @Mensaje + 'No se puede eliminar porque se encuentra relacionado a una COMPRA \n'
		END*/

		--OJOOOO
	IF EXISTS (SELECT * FROM DT_PEDIDO dc
	INNER JOIN PRODUCTO p ON p.IDPRODUCTO = dc.ID_PRODUCTO
	WHERE p.IDPRODUCTO = @IdProducto
	)
	BEGIN
		set @pasoreglas = 0
		set @Respuesta = 0
		set @Mensaje = @Mensaje + 'No se puede eliminar porque se encuentra relacionado a la VENTA \n'
		END

		IF (@pasoreglas = 1)
		begin
			delete from PRODUCTO where IDPRODUCTO = @IdProducto
			set @Respuesta = 1
			end

	end
GO
/****** Object:  StoredProcedure [dbo].[sp_EliminarProveedor]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

create procedure [dbo].[sp_EliminarProveedor](
@IdProveedor int,
@Resultado bit output,
@Mensaje varchar (500) output
)
as
begin
	SET @resultado = 1
	IF NOT EXISTS (
	select * from PROVEEDOR p 
	inner join COMPRA c on p.IDPROVEEDOR = c.IDPROVEEDOR
	where p.IDPROVEEDOR = @IdProveedor)
	begin
	delete top (1) from PROVEEDOR where IDPROVEEDOR = @IdProveedor
	end
	ELSE
	begin
		SET @Resultado = 0
		set @Mensaje = 'El proveedor se encuentrara relacionado a una compra'
	end

end

SELECT * FROM PROVEEDOR;
GO
/****** Object:  StoredProcedure [dbo].[SP_ELIMINARUSUARIO]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
Create PROC [dbo].[SP_ELIMINARUSUARIO](
@idusuario int,
@Respuesta bit output,
@Mensaje varchar(500) output)
as
begin
	set @Respuesta = 0
	set @Mensaje=''
	declare @pasoreglas bit=1;
	if exists (select*from COMPRA c inner join
	USUARIOS u on u.U_IDUSUARIO=c.U_IDUSUARIO where u.U_IDUSUARIO=@idusuario)
	begin
		set @pasoreglas=0
		set @Respuesta=0
		set @Mensaje= @Mensaje+'No se puede eliminar al usuario, se encuentra relacionado a una compra'
	end

	if exists (select*from PEDIDO p inner join
	USUARIOS u on u.U_IDUSUARIO=p.ID_USUARIO where u.U_IDUSUARIO=@idusuario)
	begin
		set @pasoreglas=0
		set @Respuesta=0
		set @Mensaje= @Mensaje+'No se puede eliminar al usuario, se encuentra relacionado a un pedido'
	end

	if(@pasoreglas=1)
	begin
		delete from USUARIOS where U_IDUSUARIO=@idusuario
		set @Respuesta=1
	end
	
		
end
GO
/****** Object:  StoredProcedure [dbo].[sp_ModificarCliente]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
	CREATE PROC [dbo].[sp_ModificarCliente](
	@Idcliente int,
	@documento varchar(50),
	@nombre varchar(80),
	@apellido varchar(80),
	@correo varchar (150),
	@telefono varchar (50),
	@estado bit,
	@resultado bit output,
	@mensaje varchar(500) output	
	)
	as
	begin
	set @resultado = 1
	declare @Idpersona int 
	if NOT EXISTS (SELECT * FROM CLIENTES WHERE C_DOCUMENTO= @documento and C_IDCLIENTE !=@Idcliente )
	begin 
		update CLIENTES set
		C_DOCUMENTO =@documento,
		C_NOMBRE= @nombre,
		C_APELLIDO= @apellido,
		C_CORREO= @correo,
		C_TELEFONO=@telefono,
		C_ESTADO=@ESTADO	
		where C_IDCLIENTE = @Idcliente
		
		end 

		else 
		begin 
			SET @resultado = 0
			set @mensaje= 'El numero de documento ya existe'
			end 
		end	
GO
/****** Object:  StoredProcedure [dbo].[sp_ModificarProducto]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

create procedure [dbo].[sp_ModificarProducto](
@IdProducto int,
@Codigo varchar (20),
@Nombre varchar (30),
@Descripcion varchar (30),
@IdCategoria int,
@Estado bit,
@Resultado int output,
@Mensaje varchar (500) output

) as 
begin
SET @Resultado = 1
IF NOT EXISTS (SELECT * FROM PRODUCTO WHERE CODIGO = @Codigo AND IDPRODUCTO != @IdProducto)

update PRODUCTO set
CODIGO = @Codigo,
NOMBREPRODUCTO = @Nombre,
DESCRIPCION = @Descripcion,
IDCATEGORIA = @IdCategoria,
ESTADO = @Estado
where IDPRODUCTO = @IdProducto
ELSE
begin
SET @Resultado = 0
SET @Mensaje = 'Ya existe un producto con el mismo codigo'
end
end

GO
/****** Object:  StoredProcedure [dbo].[sp_ModificarProveedor]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

create PROC [dbo].[sp_ModificarProveedor](
@IdProveedor int,
@Documento varchar (50),
@RazonSocial varchar (50),
@Correo varchar (50),
@Telefono varchar (50),
@Estado bit,
@Resultado int output,
@Mensaje varchar (500) output
)as
begin
	SET @Resultado = 1
	DECLARE @IDPERSONA INT
	IF NOT EXISTS (SELECT * FROM PROVEEDOR WHERE DOCUMENTO = @Documento and @IdProveedor != @IdProveedor)
	begin
		update PROVEEDOR set
		DOCUMENTO = @Documento,
		RAZONSOCIAL = @RazonSocial,
		CORREO = @Correo,
		TELEFONO = @Telefono,
		ESTADO = @Estado
		where IDPROVEEDOR = @IdProveedor
	end
	else
	begin
		SET @Resultado = 0
		set @Mensaje = 'El numero de documento ya existe'
	end
end

GO
/****** Object:  StoredProcedure [dbo].[SP_RegistrarCategoria]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_RegistrarCategoria](
@Descripcion varchar(50),
@Estado bit,
@Resultado int output,
@Mensaje varchar (500)output
)as
begin
	SET @Resultado = 0
	IF NOT EXISTS (SELECT * FROM CATEGORIA WHERE NOMBRECATEGORIA = @Descripcion)
	begin
	insert into CATEGORIA(NOMBRECATEGORIA,ESTADOCAT)values (@Descripcion,@Estado)
	set @Resultado = SCOPE_IDENTITY()
	end
	ELSE
		set @Mensaje = 'No se puede repetir la descripcion de una categoria'

end

GO
/****** Object:  StoredProcedure [dbo].[sp_RegistrarCliente]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create PROC [dbo].[sp_RegistrarCliente](
@documento varchar(50),
@nombre varchar(80),
@apellido varchar(80),
@correo varchar(150),
@telefono varchar(9),
@estado bit,
@resultado int output,
@mensaje varchar(500)output)
as
begin
set @resultado =0
declare @idpersona int
if NOT EXISTS (SELECT * FROM CLIENTES WHERE C_DOCUMENTO	 = @documento) 
begin
	insert into CLIENTES(C_DOCUMENTO,C_NOMBRE,C_APELLIDO,C_CORREO,C_TELEFONO,C_ESTADO) values (
	@documento,@nombre,@apellido,@correo,@telefono,@estado)
	set @resultado = SCOPE_IDENTITY()
	end
	else
	set @mensaje='El numero de documento ya existe'
	end
GO
/****** Object:  StoredProcedure [dbo].[sp_RegistrarCompra]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create procedure [dbo].[sp_RegistrarCompra](
@IdUsuario int,
@IdProveedor int,
@TipoDocumento varchar(500),
@NumeroDocumento varchar(500),
@MontoTotal decimal(10,2),
@DetalleCompra [EDetalle_Compra]READONLY,
@Resultado bit output,
@Mensaje varchar(500) output
)
as
begin
	begin try
		declare @idcompra int =0
		set @Resultado =1
		set @Mensaje =''
		begin transaction registro
			
			insert into COMPRA(U_IDUSUARIO,IDPROVEEDOR,TIPO_DOCUMENTO,NUMERO_DOCUMENTO,MONTO_TOTAL)
			values(@IdUsuario,@IdProveedor,@TipoDocumento,@NumeroDocumento,@MontoTotal)		
			set @idcompra= SCOPE_IDENTITY()
			insert into DETALLE_COMPRA(ID_COMPRA,IDPRODUCTO,PRECIOCOMPRA,PRECIOVENTA,CANTIDAD,MONTO_TOTAL)
			select @idcompra,IDPRODUCTO,PRECIOCOMPRA,PRECIOVENTA,CANTIDAD,MONTO_TOTAL from @DetalleCompra	
			update PRODUCTO set CANTIDADESTOCK = 1 where IDPRODUCTO = 1
			update p set p.CANTIDADESTOCK=p.CANTIDADESTOCK +dc.CANTIDAD,
			p.PRECIOUNIDAD=dc.PRECIOCOMPRA,
			p.PRECIOVENTA=dc.PRECIOVENTA
			from PRODUCTO p
			inner join @DetalleCompra dc on  dc.IDPRODUCTO=p.IDPRODUCTO
		commit transaction registro
	end try
	begin catch
		rollback transaction registro
	end catch
end
GO
/****** Object:  StoredProcedure [dbo].[sp_RegistrarProducto]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create PROC [dbo].[sp_RegistrarProducto](
@Codigo varchar (20),
@Nombre varchar (30),
@Descripcion varchar (30),
@IdCategoria int,
@Estado bit,
@Resultado int output,
@Mensaje varchar (500) output
)as
begin
SET @Resultado = 0
IF NOT EXISTS (SELECT * FROM PRODUCTO WHERE CODIGO = @Codigo)
begin
	insert into PRODUCTO (CODIGO,NOMBREPRODUCTO,DESCRIPCION,IDCATEGORIA,ESTADO) values (@Codigo,@Nombre,@Descripcion,@IdCategoria,@Estado)
	set @Resultado = SCOPE_IDENTITY()
	end
	ELSE
	SET @Mensaje = 'Ya existe un producto con el mismo codigo'
	end

GO
/****** Object:  StoredProcedure [dbo].[sp_RegistrarProveedor]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create PROC [dbo].[sp_RegistrarProveedor](
@Documento varchar (50),
@RazonSocial varchar (50),
@Correo varchar (50),
@Telefono varchar (50),
@Estado bit,
@Resultado int output,
@Mensaje varchar (500) output
)as
begin
	SET @Resultado = 0
	DECLARE @IDPERSONA INT
	IF NOT EXISTS (SELECT * FROM PROVEEDOR WHERE DOCUMENTO = @Documento)
	begin
	insert into PROVEEDOR (DOCUMENTO,RAZONSOCIAL,CORREO,TELEFONO,ESTADO) values (
	@Documento,@RazonSocial,@Correo,@Telefono,@Estado)

		set @Resultado = SCOPE_IDENTITY()

	end
	else
		set @Mensaje = 'El numero de documento ya existe'

end

GO
/****** Object:  StoredProcedure [dbo].[SP_REGISTRARUSUARIO]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
Create PROC [dbo].[SP_REGISTRARUSUARIO](
@documento varchar(25),
@nombre varchar(80),
@apellido varchar(80),
@correo varchar(80),
@clave varchar(50),
@idrol int,
@estado bit,
@IdUsuarioResultado int output,
@Mensaje varchar(500) output)
as
begin
	set @IdUsuarioResultado=0
	set @Mensaje=''

	if not exists (select*from USUARIOS where U_DOCUMENTO=@documento and U_CORREO=@correo)
	begin insert into USUARIOS(U_DOCUMENTO,U_NOMBRE,U_APELLIDO,U_CORREO,U_CLAVE,U_ROL,U_ESTADO) values
	(@documento,@nombre,@apellido,@correo,@clave,@idrol,@estado)
	set @IdUsuarioResultado = SCOPE_IDENTITY()
	end
	else
		set @Mensaje='No se puede repetir el documento o correo para mas de un usuario'
end
GO
/****** Object:  StoredProcedure [dbo].[sp_RegistrarVenta]    Script Date: 16/11/2022 23:12:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
 create procedure [dbo].[sp_RegistrarVenta](
@IdUsuario int,
@TipoDocumento varchar(500),
@NumeroDocumento varchar(500),
@DocumentoCliente varchar(500),
@NombreCliente varchar(500),
@MontoPago decimal(10,2),
@MontoCambio decimal(10,2),
@Montototal decimal(10,2),
@DetalleVenta [EDetalle_Venta] READONLY,
@Resultado bit output,
@Mensaje varchar(500) output
)
as
begin
	begin try
		declare @idventa int =0
		set @Resultado =1
		set @Mensaje =''
		begin transaction registro
			
			insert into PEDIDO(ID_USUARIO,TIPODOCUMENTO,NUMERODOCUMENTO,NOMBRE_CLIENTE,MONTO_PAGO,MOTO_CAMBIO,MOTO_TOTAL,DOCUMENTOCLIENTE)
			values(@IdUsuario,@TipoDocumento,@NumeroDocumento,@NombreCliente,@MontoPago,@MontoCambio,@MontoTotal,@DocumentoCliente)		

			set @idventa= SCOPE_IDENTITY()

			insert into DT_PEDIDO(ID_PEDIDO,ID_PRODUCTO,PRECIOVENTA,CANTIDAD,MONTO_TOTAL)
			select @idventa,IDPRODUCTO,PRECIOVENTA,CANTIDAD,@MontoTotal from @DetalleVenta	
			
		commit transaction registro
	end try
	begin catch
		set @Resultado=0
		set @Mensaje= ERROR_MESSAGE()

		rollback transaction registro
	end catch
end
GO
USE [master]
GO
ALTER DATABASE [applicoreria] SET  READ_WRITE 
GO

use applicoreria;

insert into NEGOCIO(IdNegocio,Nombre,RUC,Direccion) values(1,'Calidad de software','12345679710','Av. A la bica dile no');

select * from NEGOCIO

select * from COMPRA

/*No llamar al 8,9 y 10 salen errores nose porque*/

select * from DT_PEDIDO

select * from PEDIDO
